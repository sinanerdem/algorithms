#include "fakegold70.h"


fakegold70::fakegold70(): _SIZE(70), _numberOfWeighings(0){
	for(int i=1 ; i<=70 ; i++){
		_createArray(i);
		_findFake();
		cout << i << ": "<<_numberOfWeighings;
		_deleteArray();
	}
}
void fakegold70::_createArray(int a){
	_coinsArr = new int[71]();
	_coinsArr[a] = 1;
}

void fakegold70::_deleteArray(){
	delete[] _coinsArr;
}
void fakegold70::_findFake(){
	int x = _divideAndCompare(1, _SIZE);
	cout << x;
}
int fakegold70::_divideAndCompare(int min, int max){
	int result = 0;
	int firstHalfSum = 0;
	int secondHalfSum = 0;
	int noOfCoins = max - min + 1;
	if (noOfCoins == 2){
		_numberOfWeighings++;
		return (_coinsArr[min]>_coinsArr[max]) ? min : max;
	}
	int count = noOfCoins / 2;
	int mid = min + count - 1;
	int end = mid + count;
	for (int i=min ; i<=mid ; i++){
		firstHalfSum += _coinsArr[i];
	}
	for (int i=mid+1 ; i<=end ; i++){
		secondHalfSum += _coinsArr[i];
	}
	if (firstHalfSum>secondHalfSum){
		result = _divideAndCompare(min,mid);
		_numberOfWeighings++;
	} else if (firstHalfSum<secondHalfSum){
		result = _divideAndCompare(mid+1,end);
		_numberOfWeighings++;
	} else{
		return end + 1;
	}
	return result;
}
